{% extends "base.html" %}
{% block content %}

<script src="{{ url_for('static', filename='ecosystem1_filter.js') }}" type="text/javascript"></script>

		<script src="http://d3js.org/d3.v4.min.js" charset="utf-8">
		</script>
		<style>
      		rect.bordered {
				stroke: #E6E6E6;
				stroke-width:2px;
      		}

      		text {
        		font-size: 9pt;
        		font-family: Consolas, courier;
        		fill: #aaa;
      		}

    	</style>

		<div id="chart">
		</div>
    	<div id="dataset-picker">
    	</div>

		<script src="{{ url_for('static', filename='ecosystem1_heatmap.js') }}" type="text/javascript">
		</script>
		<script>
			var dataset = {{ data | safe }};
			var filter = filter_object(dataset);
			console.log('Data exploration is running.');
			console.log(dataset);

			window.onload = function() {
				myPlot = heatmapChart();
				myPlot.init(dataset['dataExploration']);
				document.querySelector('#BMI').addEventListener('click', function(){
					console.log(filter_wrapper(filter,"Data"))
					myPlot.update(filter_wrapper(filter,"Data"));
				});
				document.querySelector('#NATIONALITY').addEventListener('click', function(){
					console.log(filter_wrapper(filter,"Data"))
					myPlot.update(filter_wrapper(filter,"Data"));
				});
				document.querySelector('#SEX').addEventListener('click', function(){
					console.log(filter_wrapper(filter,"Data"))
					myPlot.update(filter_wrapper(filter,"Data"));
				});
			};

			//EXAMPLE CODE FOR FILTERED VALUES - For testing only
			/* window.onload = function() {
				var filter = filter_object(dataset);

				var filtered_data = filter_wrapper(filter,"Data")

				console.log(filtered_data)
				myPlot = heatmapChart();
				myPlot.init(filtered_data);
			}
			*/


		</script>

{% endblock %}
